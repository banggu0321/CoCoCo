<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<head>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" />
<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

<script>
	
</script>

<style>
.sideMenu, .side, .content{
	float: left;
	height: 100%;
}

.side{
	width: 80px;
}

.sideMenu{
	width: 300px;
}

.sideMenu a {
	color: black;
	font-size: 20px;
}

.sideMenu a:hover {
	color: black;
	text-decoration: none;
	font-size: 23px;
}

.contentBody {
	padding-top: 30px;
	align-content: center;
}

.content{
	background-color: #eee;
}

#myMenu{
	bottom: 20%;
    position: absolute;
}

#teamList a img, #myMenu a img, .sideMenu div img {
	margin: 10px;
}

#myProfile {
	text-align: center;
}

#myProfile img{
	width: 100px;
	height: 100px;
}

#myInfo {
	font-weight: bold;
}

#myName {
	font-size: 17px;
}

#myModal {
	position: fixed;
	top: 30%;
	left: 20%;
	right: 20%;
}

img#status {
	width: 20px;
	height: 20px;
}

.profileImg .img, #teamList img{
	width: 40px;
	height: 40px;
}

#myMenu img {
	width: 30px;
	height: 30px;
}


#teamList {
	overflow: auto;
}

.profileImg {
	position: relative;
}

.admin {
	width: 15px;
	height: 15px;
	position: absolute;
	left: 10%;
    top: -15%;
}
</style>
<!-- 하위 HTML에서 CSS 재정의할 예정 -->
<th:block layout:fragment="style"></th:block>
</head>

<body>

<!-- fragment 삽입하기 -->
<header th:replace="~{/fragments/header::header1}"></header>

<div class="container-fluid contentBody">
	<div th:replace="~{/layoutJY/side :: side}"></div>
		
	<div class="sideMenu">
		<div id="myProfile">
			<img th:if="${session.user.image == null}" th:src="@{/images/userImg.svg}" class="img-circle">
			<img th:if="${session.user.image != null}" th:src="${session.user.image}" class="img-circle">
			<div id="myInfo">
				<div id="myName">[[${session.user.name}]]<img id="status" th:src="@{/images/status.svg}" data-toggle="modal" data-target="#myModal">
					<br>([[${session.user.userId}]])
				</div>
				[[${session.user.company}]]
			</div>
		</div>
		<hr>
		<h4>팀원</h4>
		<div th:each="tu:${userList}" th:if="${tu.teamUserId.user.userId != session.user.userId}">
		<div class="profileImg">
			<img th:if="${tu.teamUserId.user.image == null}" th:src="@{/images/userImg.svg}" class="img-circle img">
			<img th:if="${tu.teamUserId.user.image != null}" th:src="${tu.teamUserId.user.image}" class="img-circle img">
			<img class="admin" th:if="${tu.userRole == 'ADMIN'}" th:src="@{/images/crown.svg}">
			[[${tu.teamUserId.user.name}]] ([[${tu.teamUserId.user.userId}]])
		</div>
		</div>
	</div>
		
	<!-- 상태변경 모달 -->
    <div id="myModal" class="modal fade" role="dialog">
		<div class="model_dialog">
	        <!-- Modal content -->
	        <div class="modal-content">
	        	<div class="modal-body">
					<label>상태변경</label> 
					<select class="form-control" name="status">
						<option>출근</option>
						<option>퇴근</option>
						<option>외근</option>
						<option>휴가</option>
					</select>
		        </div>
				<div class="modal-footer">
			    	<button id = "statusUpdate" class="btn btn-primary">수정</button>
			    	<button type="button" class="btn btn-primary" data-dismiss="modal">취소</button>
	        	</div>
	        </div>
    	</div>
    </div> <!-- Modal --> 
    
	<!-- 하위 HTML에서 content 재정의할 예정 -->
	<div layout:fragment="content"></div>
</div>

<script>
$("#status").click(function () {
	var status = "[[${session.user.status}]]";
	
	if(status != null || status != '') {
		$("select[name='status']").val(status);
		return;
	}
	alert("null!");
})

$("#statusUpdate").click(function () {
	var status = $("select[name='status']").val();
	alert(status);
})
</script>

<!-- 하위 HTML에서 javascript 재정의할 예정   th:block 은 없어지는 태그이다 -->
<th:block layout:fragment="script">

</th:block>
</body>
</html>