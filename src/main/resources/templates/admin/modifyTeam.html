<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<div id="box">
	<img th:if="${team.teamImg!=null}" class="showImg" th:src="${team.teamImg}" th:alt="${team.teamImg}" width="250px" height="100%">
	<img th:if="${team.teamImg==null}" class="showImg" th:src="@{/images/teamImg.png}" alt="null" width="250px" height="250px">
	
	<div id="teamInfo">
		<form id="modifyForm" action="/admin/modify" method="post" enctype="multipart/form-data">
			<input type="hidden" name="teamId" th:value="${team.teamId}">
			<div class="form-group">
				<label>WORKSPACE NAME</label>
				<input type="text" name="teamName" class="form-control" th:value="${team.teamName}">
			</div>
			
			<div class="form-group">
				<label>WORKSPACE INFO</label>
				<textarea class="form-control" name="teamInfo" rows="2">[[${team.teamInfo}]]</textarea>
			</div>
			
			<div class="form-group">
				<label>WORKSPACE IMAGE</label> <br>
				<p th:if="${team.teamImg!=null}" id="imgInfo">
					[[${#strings.substring(team.teamImg,69)}]]
					<input type="button" id="delBtn" class="btn btn-primary btn-sm" value="삭제">
				</p>
				<input type="file" name="newPhoto" id="img" class="form-control" accept="image/*">
			</div>
	
			<input type="submit" class="btn btn-primary" value="수정">
			<input type="button" class="btn btn-primary reloadBtn" value="취소">
		</form>
	</div>
</div>

<script>
	$(".reloadBtn").click(function() {
		location.reload();
	});
	
	$("#delBtn").click(function() {
		var teamId = $("input[name='teamId']").val();
		$.ajax({
			type:"post",
			url:"/admin/deleteImg/"+teamId,
			success: function(resData) {
				$(".showImg").attr("src","@{/images/teamImg.png}");
	        	$("#imgInfo").hide();
				
			}
		});
	});
	
	$("#img").change(function(event) {
        var reader = new FileReader();

        reader.onload = function(event) {
        	$(".showImg").attr("src", event.target.result);
        };

        reader.readAsDataURL(event.target.files[0]);
      });
	
</script>
</html>